# ๐ณ ุฏููู ุฅุนุฏุงุฏ ุงูุฏูุน ุงูุฅููุชุฑููู + ููุงุชูุฑ PDF

## ๐ฏ ุงูููุฒุงุช ุงููุถุงูุฉ

### โ ุงูุฏูุน ุงูุญูููู ูุน Stripe
- โ **ุฏูุน ุขูู**: ูุนุงูุฌุฉ ุขููุฉ ููุจุทุงูุงุช ุงูุงุฆุชูุงููุฉ
- โ **ุจูุฆุฉ ุงุฎุชุจุงุฑ**: ุฅููุงููุฉ ุงุฎุชุจุงุฑ ุงูุฏูุน ุจุฏูู ุชูุงููู
- โ **ุชุชุจุน ุงููุฏููุนุงุช**: ุญูุธ ุชูุงุตูู ุงููุนุงููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ **ุฏุนู ูุชุนุฏุฏ ุงูุนููุงุช**: USD ุงูุชุฑุงุถูุงู ูุน ุฅููุงููุฉ ุงูุชูุณุน

### โ ุชูููุฏ ุงูููุงุชูุฑ PDF
- โ **ููุงุชูุฑ ุงุญุชุฑุงููุฉ**: ุชุตููู ุฌููู ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- โ **ุชุญููู ููุดุงุฑูุฉ**: ุฅููุงููุฉ ุชุญููู ุฃู ูุดุงุฑูุฉ ุงููุงุชูุฑุฉ
- โ **ูุชุงุญุฉ ุจุนุฏ ุงูุฏูุน**: ุงูููุงุชูุฑ ูุชุงุญุฉ ููุท ููุทูุจุงุช ุงููุฏููุนุฉ
- โ **ูุนูููุงุช ุดุงููุฉ**: ุชูุงุตูู ุงูุทูุจุ ุงูููุชุฌุงุชุ ูุงูุฏูุน

## ๐๏ธ ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### 1. ุฅุนุฏุงุฏ Stripe

#### ุฃ) ุฅูุดุงุก ุญุณุงุจ Stripe
1. ุงุฐูุจ ุฅูู [Stripe Dashboard](https://dashboard.stripe.com)
2. ุฃูุดุฆ ุญุณุงุจ ุฌุฏูุฏ ุฃู ุณุฌู ุฏุฎูู
3. ุงูุชูู ุฅูู **Developers** โ **API keys**

#### ุจ) ุงูุญุตูู ุนูู ุงูููุงุชูุญ
```bash
# ููุงุชูุญ ุงูุชุทููุฑ (Test Mode)
Publishable key: pk_test_xxxxxxxxxxxxx
Secret key: sk_test_xxxxxxxxxxxxx

# ููุงุชูุญ ุงูุฅูุชุงุฌ (Live Mode) - ุงุณุชุฎุฏููุง ูุงุญูุงู
Publishable key: pk_live_xxxxxxxxxxxxx  
Secret key: sk_live_xxxxxxxxxxxxx
```

#### ุฌ) ุชุญุฏูุซ PaymentService
ูู ููู `lib/services/payment_service.dart`:
```dart
static const String _publishableKey = 'pk_test_YOUR_KEY_HERE';
```

### 2. ุฅุนุฏุงุฏ Supabase

#### ุฃ) ุชุดุบูู ุงูุฌุฏุงูู
ูู ุจุชุดุบูู ููู `supabase_tables/payment_transactions.sql` ูู Supabase SQL Editor:
```sql
-- ุณูุชู ุฅูุดุงุก ุฌุฏูู payment_transactions
-- ูุชุญุฏูุซ ุฌุฏูู orders ูุฏุนู ุงูุฏูุน
```

#### ุจ) ุฅุนุฏุงุฏ Edge Function
1. ุฃูุดุฆ ูุฌูุฏ `supabase/functions/create-payment-intent/`
2. ุงูุณุฎ ูุญุชูู `supabase_functions/create-payment-intent.ts`
3. ุฃุถู ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ:
```bash
STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxx
SUPABASE_URL=your_supabase_url
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

#### ุฌ) ูุดุฑ Edge Function
```bash
supabase functions deploy create-payment-intent
```

### 3. ุฅุนุฏุงุฏ ุฌุฏูู ุงูุฏุฑุฏุดุฉ
ูู ุจุชุดุบูู ููู `supabase_tables/support_chat.sql` ูู Supabase SQL Editor.

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### ุจุทุงูุงุช ุงูุงุฎุชุจุงุฑ
```
ุฑูู ุงูุจุทุงูุฉ: 4242 4242 4242 4242
ุงูุชูุงุก ุงูุตูุงุญูุฉ: ุฃู ุชุงุฑูุฎ ูุณุชูุจูู (ูุซู: 12/25)
CVC: ุฃู 3 ุฃุฑูุงู (ูุซู: 123)
```

### ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ
1. **ุฏูุน ูุงุฌุญ**: ุงุณุชุฎุฏู ุงูุจุทุงูุฉ ุฃุนูุงู
2. **ุฏูุน ูุงุดู**: `4000 0000 0000 0002`
3. **ูุชุทูุจ ูุตุงุฏูุฉ**: `4000 0025 0000 3155`

## ๐ฑ ุงุณุชุฎุฏุงู ุงูุชุทุจูู

### 1. ุฅุฌุฑุงุก ุทูุจ
1. ุฃุถู ููุชุฌุงุช ุฅูู ุงูุณูุฉ
2. ุงูุชูู ุฅูู ุตูุญุฉ ุงูุฏูุน
3. ุงุฎุชุฑ **"ุงูุฏูุน ุนุจุฑ Stripe"**
4. ุงุชุจุน ุงูุชุนูููุงุช ูุฅููุงู ุงูุฏูุน

### 2. ุชุญููู ุงููุงุชูุฑุฉ
1. ุงูุชูู ุฅูู **"ุทูุจุงุชู"**
2. ุงุฎุชุฑ ุทูุจ ูุฏููุน
3. ุงุถุบุท **"ุชุญููู ุงููุงุชูุฑุฉ"** ุฃู **"ูุดุงุฑูุฉ ุงููุงุชูุฑุฉ"**

## ๐ง ูููุงุช ุงููุธุงู

### ุฎุฏูุงุช ุฌุฏูุฏุฉ
- `lib/services/payment_service.dart` - ุฎุฏูุฉ ุงูุฏูุน ุงูุฅููุชุฑููู
- `lib/services/invoice_service.dart` - ุฎุฏูุฉ ุชูููุฏ ุงูููุงุชูุฑ

### ุตูุญุงุช ูุญุฏุซุฉ
- `lib/pages/checkout_page.dart` - ุตูุญุฉ ุงูุฏูุน ูุน Stripe
- `lib/pages/order_details_page.dart` - ุนุฑุถ ูุชุญููู ุงูููุงุชูุฑ
- `lib/pages/support_chat_page.dart` - ุฏุฑุฏุดุฉ ูุจุงุดุฑุฉ ูุน ุงูุฏุนู

### ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `supabase_tables/payment_transactions.sql` - ุฌุฏูู ุงููุนุงููุงุช
- `supabase_tables/support_chat.sql` - ุฌุฏูู ุงูุฏุฑุฏุดุฉ

### Edge Functions
- `supabase_functions/create-payment-intent.ts` - ุฅูุดุงุก Payment Intent

## ๐ ุงูุงูุชูุงู ููุฅูุชุงุฌ

### 1. ุชุญุฏูุซ ููุงุชูุญ Stripe
```dart
// ูู PaymentService
static const String _publishableKey = 'pk_live_xxxxxxxxxxxxx';
```

### 2. ุชุญุฏูุซ Edge Function
```typescript
const stripeSecretKey = Deno.env.get('STRIPE_SECRET_KEY')! // sk_live_xxxxxxxxxxxxx
```

### 3. ุฅุนุฏุงุฏ Webhooks
ูู Stripe Dashboard โ Webhooksุ ุฃุถู:
```
Endpoint: https://your-project.supabase.co/functions/v1/stripe-webhook
Events: payment_intent.succeeded, payment_intent.payment_failed
```

## ๐ก๏ธ ุงูุฃูุงู

- โ **PCI Compliance**: Stripe ูุนุชูุฏ PCI DSS Level 1
- โ **ุชุดููุฑ ุงูุจูุงูุงุช**: ุฌููุน ุงูุจูุงูุงุช ูุดูุฑุฉ ุฃุซูุงุก ุงูููู ูุงูุชุฎุฒูู
- โ **Row Level Security**: ุญูุงูุฉ ุจูุงูุงุช ุงููุณุชุฎุฏููู ูู Supabase
- โ **ูุง ุชุฎุฒูู ูุจูุงูุงุช ุงูุจุทุงูุงุช**: ุชุชู ูุนุงูุฌุชูุง ุนุจุฑ Stripe ููุท

## ๐ ุงูุฏุนู ุงูููู

ูููุณุงุนุฏุฉ ูู ุงูุฅุนุฏุงุฏ ุฃู ุญู ุงููุดุงูู:
- ๐ง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: support@autoshop.com
- ๐ฌ ุงูุฏุฑุฏุดุฉ ุงููุจุงุดุฑุฉ: ูุชุงุญุฉ ุฏุงุฎู ุงูุชุทุจูู
- ๐ ุงููุซุงุฆู: [Stripe Docs](https://stripe.com/docs) | [Supabase Docs](https://supabase.com/docs)

---
**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ GitHub Copilot** ๐ค
